
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>RT DIGITAL PRO LENGKAP</title>
<style>
body{font-family:Arial;background:#eef2f7;margin:0;padding:20px}
h1{text-align:center}
.container{background:#fff;padding:20px;border-radius:12px;box-shadow:0 5px 15px rgba(0,0,0,0.1);margin-bottom:20px}
input,select,button{padding:8px;margin:5px;width:100%;border-radius:6px;border:1px solid #ccc}
button{background:#0d6efd;color:#fff;border:none;cursor:pointer}
button:hover{background:#0b5ed7}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#0d6efd;color:white}
.dashboard-box{display:inline-block;width:23%;background:#0d6efd;color:white;padding:15px;margin:5px;border-radius:10px;text-align:center}
.logo{width:80px}
@media print{
.no-print{display:none}
}
</style>
</head>
<body>

<h1>RT DIGITAL PRO LENGKAP</h1>

<div class="container">
<h3>Input Data Warga</h3>

<input id="nama" placeholder="Nama Lengkap">
<input id="nik" placeholder="NIK (16 digit)" maxlength="16">
<input id="kk" placeholder="No KK (16 digit)" maxlength="16">
<input id="tgl" type="date">

<select id="jk">
<option value="">Jenis Kelamin</option>
<option>Laki-Laki</option>
<option>Perempuan</option>
</select>

<select id="agama">
<option>Islam</option>
<option>Kristen</option>
<option>Katolik</option>
<option>Hindu</option>
<option>Buddha</option>
<option>Konghucu</option>
</select>

<select id="statusKawin">
<option>Belum Kawin</option>
<option>Kawin</option>
<option>Cerai Hidup</option>
<option>Cerai Mati</option>
</select>

<select id="statusKeluarga">
<option>Kepala Keluarga</option>
<option>Istri</option>
<option>Anak</option>
<option>Lainnya</option>
</select>

<select id="statusRumah">
<option>Milik Sendiri</option>
<option>Kontrak</option>
<option>Sewa</option>
<option>Menumpang</option>
</select>

<button onclick="simpan()">Simpan</button>
</div>

<div class="container">
<h3>Dashboard</h3>
<div id="dashboard"></div>
</div>

<div class="container">
<h3>Data Warga</h3>
<table>
<thead>
<tr>
<th>Nama</th><th>NIK</th><th>No KK</th><th>Usia</th><th>Status</th><th>Aksi</th>
</tr>
</thead>
<tbody id="tabel"></tbody>
</table>
</div>

<div class="container no-print">
<h3>Laporan Keuangan RT</h3>
<input id="ket" placeholder="Keterangan">
<input id="jumlah" type="number" placeholder="Jumlah">
<select id="jenis">
<option>Pemasukan</option>
<option>Pengeluaran</option>
</select>
<button onclick="simpanKeuangan()">Simpan Keuangan</button>
<table>
<thead><tr><th>Keterangan</th><th>Jenis</th><th>Jumlah</th></tr></thead>
<tbody id="tabelKeuangan"></tbody>
</table>
</div>

<script>
let data = JSON.parse(localStorage.getItem("dataWarga")) || []
let keuangan = JSON.parse(localStorage.getItem("dataKeuangan")) || []

function hitungUsia(tgl){
let birth = new Date(tgl)
let today = new Date()
return today.getFullYear() - birth.getFullYear()
}

function kategoriUsia(usia){
if(usia <= 5) return "Balita"
if(usia <= 17) return "Anak"
if(usia <= 59) return "Dewasa"
return "Lansia"
}

function simpan(){
let nama = document.getElementById("nama").value.trim()
let nik = document.getElementById("nik").value.trim()
let kk = document.getElementById("kk").value.trim()
let tgl = document.getElementById("tgl").value

if(!nama||!nik||!kk||!tgl){alert("Lengkapi data");return}
if(nik.length!=16||isNaN(nik)){alert("NIK harus 16 digit angka");return}
if(data.find(d=>d.nik===nik)){alert("NIK sudah ada!");return}

let usia = hitungUsia(tgl)
let kategori = kategoriUsia(usia)

data.push({nama,nik,kk,usia,kategori})
localStorage.setItem("dataWarga",JSON.stringify(data))

render()
}

function render(){
let tabel = document.getElementById("tabel")
tabel.innerHTML=""
data.forEach((d,i)=>{
tabel.innerHTML+=`
<tr>
<td>${d.nama}</td>
<td>${d.nik}</td>
<td>${d.kk}</td>
<td>${d.usia}</td>
<td>${d.kategori}</td>
<td><button onclick="hapus(${i})">Hapus</button></td>
</tr>`
})
renderDashboard()
}

function hapus(i){
data.splice(i,1)
localStorage.setItem("dataWarga",JSON.stringify(data))
render()
}

function renderDashboard(){
let balita=data.filter(d=>d.kategori=="Balita").length
let anak=data.filter(d=>d.kategori=="Anak").length
let dewasa=data.filter(d=>d.kategori=="Dewasa").length
let lansia=data.filter(d=>d.kategori=="Lansia").length

document.getElementById("dashboard").innerHTML=`
<div class="dashboard-box">Balita<br>${balita}</div>
<div class="dashboard-box">Anak<br>${anak}</div>
<div class="dashboard-box">Dewasa<br>${dewasa}</div>
<div class="dashboard-box">Lansia<br>${lansia}</div>`
}

function simpanKeuangan(){
let ket=document.getElementById("ket").value
let jumlah=document.getElementById("jumlah").value
let jenis=document.getElementById("jenis").value
if(!ket||!jumlah){alert("Isi data keuangan");return}
keuangan.push({ket,jenis,jumlah})
localStorage.setItem("dataKeuangan",JSON.stringify(keuangan))
renderKeuangan()
}

function renderKeuangan(){
let tb=document.getElementById("tabelKeuangan")
tb.innerHTML=""
keuangan.forEach(k=>{
tb.innerHTML+=`<tr><td>${k.ket}</td><td>${k.jenis}</td><td>${k.jumlah}</td></tr>`
})
}

render()
renderKeuangan()
</script>

</body>
</html>
